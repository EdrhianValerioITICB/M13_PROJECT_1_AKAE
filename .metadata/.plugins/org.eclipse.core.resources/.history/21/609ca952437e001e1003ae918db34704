package cat.iticbcn.demo.database;

import cat.iticbcn.demo.repository.CompanyRepository;
import cat.iticbcn.demo.repository.OfferRepository;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.Id;
import cat.iticbcn.demo.bean.Company;
import cat.iticbcn.demo.bean.Offer;
import cat.iticbcn.demo.controllers.*;

import org.slf4j.LoggerFactory;
import org.springframework.context.annotation.Bean;

import org.slf4j.Logger;

import org.springframework.boot.CommandLineRunner;

import org.springframework.context.annotation.Configuration;

@Configuration
public class LoadDatabase {
	
	 private static final Logger log = LoggerFactory.getLogger(LoadDatabase.class);

	  @Bean
	  CommandLineRunner initDatabase(CompanyRepository repository) {
		  
		  Company compañia1=new Company("Empresa 1", 54,190,"pepe", "C/ Sanchez Avilo", 978277378,"empresa1@gmail.com", "financiera");
	   Company compañia2=new Company("Empresa 2", 54,190,"pepe", "C/ Sanchez Avilo", 978277378,"empresa1@gmail.com", "financiera");
		 OfferRepository meh = null;
	   return args -> {
	      log.info("Preloading " + 
	    repository.save(compañia1));
	     if( log.equals(compañia1)) {
	    	 Offer oferta = new Offer("vacante RRHH","jornada partida", compañia1);
	    	 log.info("Preloading " + meh.save(oferta));
	     }
	     
	     
	      log.info("Preloading " + 
	    repository.save(compañia2));
	      if( log.equals(compañia2)) {
	    		Offer oferta2= new Offer("vacante recepcionista","jornada completa",new Company());
				
				  
				  log.info("Preloading " + meh.save(oferta2));
	      }
	     
		
	    };
	  }
	
}