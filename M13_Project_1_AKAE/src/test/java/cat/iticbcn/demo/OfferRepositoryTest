package cat.iticbcn.demo;


import static org.junit.jupiter.api.Assertions.assertEquals;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Optional;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;
import org.springframework.test.context.jdbc.Sql;

import cat.iticbcn.demo.bean.Company;
import cat.iticbcn.demo.bean.Offer;
import cat.iticbcn.demo.repository.CompanyRepository;
import cat.iticbcn.demo.repository.OfferRepository;

@DataJpaTest

public class OfferRepositoryTest {
	
	@Autowired
	private TestEntityManager entityManager;
	@Autowired
	private OfferRepository repoOff;
//	@Autowired 
//	private Company company = new Company("Starbucks", 35, "u49304833o4", "Starbucks United", "carrer diagonal,33", "3892833402","starbucksDiag@gmail.com","peque√±a", new ArrayList<>());
//	@Autowired
//	private CompanyRepository repoCo;
	
	
	@Test
	@Sql("import.sql")
	void findAllWithSql(){
		List<Offer> offers = repoOff.findAll();
		assertEquals(10,offers.size());
	}
	
	
	
	@Test
	@Sql("import.sql")
	void findById() {		
		/*
		 * Offer oferta = new Offer("Programacion avanzada en Java de segundo",
		 * "Professor de programacion", ); entityManager.persist(oferta);
		 * entityManager.flush();
		 */
		
		Optional<Offer> off = repoOff.findById(1L);   
		assertEquals(off.get().getId(), off.orElseGet(null).getId());
	}
	
	

}
